(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(14),o=t.n(c),r=t(3),a=t(1),u=t(4),i=t.n(u),l="/api/persons",s=function(){return i.a.get(l).then((function(e){return e.data}))},d=function(e){return i.a.post(l,e).then((function(e){return e.data}))},b=function(e){return i.a.delete("".concat(l,"/").concat(e)).then((function(e){return e.data}))},j=function(e,n){return i.a.put("".concat(l,"/").concat(e),n).then((function(e){return e.data}))},f=t(0),h=function(e){var n=e.message,t=e.color,c={color:t,borderColor:t};return null===n?null:Object(f.jsx)("div",{className:"notification",style:c,children:n})},m=function(e){var n=e.filter,t=e.onChangeFilter;return Object(f.jsxs)("div",{children:["filter shown with ",Object(f.jsx)("input",{value:n,onChange:t})]})},O=function(e){var n=e.newName,t=e.newNumber,c=e.onSubmitHandler,o=e.onChangeNameHandler,r=e.onChangeNumberHandler;return Object(f.jsxs)("form",{onSubmit:c,children:[Object(f.jsxs)("div",{children:["name: ",Object(f.jsx)("input",{value:n,onChange:o})]}),Object(f.jsxs)("div",{children:["number: ",Object(f.jsx)("input",{value:t,onChange:r})]}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{type:"submit",children:"add"})})]})},v=function(e){var n=e.persons,t=e.onDeleteHandler;return Object(f.jsx)("div",{children:n.map((function(e){return Object(f.jsxs)("div",{children:[e.name," ",e.number,Object(f.jsx)("button",{onClick:function(){return t(e.id)},children:"delete"})]},e.name)}))})},p=(t(38),function(){var e=Object(a.useState)([]),n=Object(r.a)(e,2),t=n[0],c=n[1],o=Object(a.useState)(""),u=Object(r.a)(o,2),i=u[0],l=u[1],p=Object(a.useState)(""),x=Object(r.a)(p,2),g=x[0],w=x[1],C=Object(a.useState)(""),N=Object(r.a)(C,2),S=N[0],H=N[1],k=Object(a.useState)(null),y=Object(r.a)(k,2),D=y[0],E=y[1],F=Object(a.useState)("green"),I=Object(r.a)(F,2),J=I[0],L=I[1],A=function(e,n){L(n),E(e),setTimeout((function(){E(null)}),5e3)};Object(a.useEffect)((function(){s().then((function(e){c(e)}))}),[]);var B=S?t.filter((function(e){return e.name.includes(S)})):t;return Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Phonebook"}),Object(f.jsx)(h,{message:D,color:J}),Object(f.jsx)(m,{filter:S,onChangeFilter:function(e){H(e.target.value.toLocaleLowerCase())}}),Object(f.jsx)("h3",{children:"add a new"}),Object(f.jsx)(O,{newName:i,newNumber:g,onSubmitHandler:function(e){e.preventDefault();var n={name:i,number:g},o=t.map((function(e){return e.name})).indexOf(n.name),r=-1!==o?t[o].id:null;-1!==o?(window.confirm("".concat(i," is already added to phonebook, replace the old number with a new one"))&&j(r,n).then((function(e){c(t.map((function(n){return n.id!==r?n:e}))),l(""),w("")})),A("Edited ".concat(n.name),"green")):(d(n).then((function(e){console.log(e),c(t.concat(e)),l(""),w("")})),A("Added ".concat(n.name),"green"))},onChangeNameHandler:function(e){l(e.target.value)},onChangeNumberHandler:function(e){w(e.target.value)}}),Object(f.jsx)("h2",{children:"Numbers"}),Object(f.jsx)(v,{persons:B,onDeleteHandler:function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Delete ".concat(n.name," ?"))&&b(e).then((function(n){console.log(n),c(t.filter((function(n){return n.id!==e})))})).catch((function(e){console.log(e),A("Information of ".concat(n.name," has already been removed from server"),"red")}))}})]})});o.a.render(Object(f.jsx)(p,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.2a7167a9.chunk.js.map